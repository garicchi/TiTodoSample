var _ = require('lodash'),
	acorn = require('acorn'),
	escodegen = require('escodegen'),
	fs = require('fs'),
	path = require('path');

var apis = require('./Titanium_4.0.0.GA.json'),
	code = '',
	methods = [];

_.each(apis, function(api, namespace){
	_.each(api.methods, function(item){
		if (!item.deprecated &&
			_.indexOf(methods, item.name) === -1) {
			methods.push(item.name);
		}
	});
});

methods.sort();

_.each(methods, function(method){
	code += 'exports.' + method + ' = function(){};\n';
});

var ast = acorn.parse(code);
code = escodegen.generate(ast, {
	format: {
		indent: {
			style: '\t'
		}
	}
});

fs.writeFileSync(path.join(__dirname, 'lib', 'alloy', '1.5.1', 'TiProxy.js'), code);